const jobList=document.getElementById("job-list"),filterList=document.getElementById("filter-list"),clearTags=document.getElementById("filter-clear");let data=[],tags=[];const checkTags=(e,t)=>e.filter((e=>t===e.role||t===e.level||e.languages.includes(t)||e.tools.includes(t))),filterData=()=>{let e=data;if(0==tags.length)return e;for(tag of tags)e=checkTags(e,tag);return e},drawTag=e=>{const t=document.createElement("div");t.classList.add("filter__item");const a=document.createElement("div");a.classList.add("tag","tag--filter"),a.innerText=e,t.appendChild(a);const n=document.createElement("span");n.classList.add("tag__remove"),t.appendChild(n),filterList.appendChild(t)},drawCards=e=>{jobList.innerHTML="";const t=document.createDocumentFragment();for(card of e){const e=document.createElement("div");e.classList.add("card");const a=document.createElement("div");a.classList.add("card__header");const n=document.createElement("img");n.classList.add("card__img"),n.src=`./assets/images/${card.company.toLowerCase().replace(/ /g,"-").replace(".","")}.svg`,a.appendChild(n);const d=document.createElement("h2");if(d.classList.add("card__title"),d.innerText=card.company,a.appendChild(d),card.new){const e=document.createElement("span");e.classList.add("card__label"),e.innerText="NEW!",a.appendChild(e)}if(card.featured){const e=document.createElement("span");e.classList.add("card__label","card__label--black"),e.innerText="FEATURED",a.appendChild(e)}e.appendChild(a);const s=document.createElement("div");s.classList.add("card__body");const c=document.createElement("p");c.classList.add("card__position"),c.innerText=card.position,s.appendChild(c);const r=document.createElement("ul");r.classList.add("card__info");const i=[card.postedAt,card.contract,card.location];for(info of i){const e=document.createElement("li");e.classList.add("card__job-info"),e.innerText=info,r.appendChild(e)}s.appendChild(r),e.appendChild(s);const l=document.createElement("div");l.classList.add("card__footer");const o=document.createElement("span");o.classList.add("tag"),o.innerText=card.role,l.appendChild(o);const m=document.createElement("span");for(language of(m.classList.add("tag"),m.innerText=card.level,l.appendChild(m),card.languages)){const e=document.createElement("span");e.classList.add("tag"),e.innerText=language,l.appendChild(e)}for(tech of card.tools){const e=document.createElement("span");e.classList.add("tag"),e.innerText=tech,l.appendChild(e)}e.appendChild(l),t.appendChild(e)}jobList.appendChild(t)},getData=async()=>{try{const e=await fetch("data/data.json");data=await e.json(),drawCards(data)}catch(e){console.log("Error",e)}};jobList.addEventListener("click",(e=>{if(e.target.classList.contains("tag")){if(!tags.includes(e.target.innerText)){drawTag(e.target.innerText),tags.push(e.target.innerText);const t=filterData();drawCards(t)}tags.length>0&&filterList.parentElement.classList.add("filter--show")}})),filterList.addEventListener("click",(e=>{if(e.target.classList.contains("tag__remove")){e.target.parentElement.remove(),tags=tags.filter((t=>t!==e.target.parentElement.innerText));const t=filterData();drawCards(t),0==tags.length&&filterList.parentElement.classList.remove("filter--show")}})),clearTags.addEventListener("click",(()=>{tags=[],filterList.innerHTML="",filterList.parentElement.classList.remove("filter--show"),drawCards(data)})),getData();